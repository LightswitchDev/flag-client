/*! For license information please see main.e047832a.chunk.js.LICENSE */
(this["webpackJsonplightswitch-client-example"]=this["webpackJsonplightswitch-client-example"]||[]).push([[0],[,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return l}));var r=n(0),i=n.n(r);function c(e,t){var n,r,i,c,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(s){c=[6,s],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};var s=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){!function(n){var r=t,i=e&&e.exports==r&&e,c="object"==typeof o&&o;c.global!==c&&c.window!==c||(n=c);var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var a=function(e){throw new s(e)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,h={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,c=e.length%3,o="",s=-1,u=e.length-c;++s<u;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),o+=l.charAt((i=t+n+r)>>18&63)+l.charAt(i>>12&63)+l.charAt(i>>6&63)+l.charAt(63&i);return 2==c?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o+=l.charAt((i=t+n)>>10)+l.charAt(i>>4&63)+l.charAt(i<<2&63)+"="):1==c&&(i=e.charCodeAt(s),o+=l.charAt(i>>2)+l.charAt(i<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,c="",o=-1;++o<t;)r=l.indexOf(e.charAt(o)),n=i%4?64*n+r:r,i++%4&&(c+=String.fromCharCode(255&n>>(-2*i&6)));return c},version:"0.1.0"};if(r&&!r.nodeType)if(i)i.exports=h;else for(var f in h)h.hasOwnProperty(f)&&(r[f]=h[f]);else n.base64=h}(o)})),a=function(e){var t=this;this._lightswitches=[],this._subscribers=[],this.subscribe=function(e){var n;null===(n=t._subscribers)||void 0===n||n.push(e)},this.getSwitch=function(e){return t._lightswitches.find((function(t){return t.key===e}))},this.getSwitches=function(e){return e?t._lightswitches.filter((function(t){return e.some((function(e){return e===t.key}))})):t._lightswitches},this._setSwitches=function(){t._getSwitches().then((function(e){t._lightswitches=e,console.log("set",e),t._subscribers.forEach((function(t){return t(e)}))})).catch(console.error)},this._getSwitches=function(){return e=t,n=void 0,i=function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return[4,fetch("http://localhost:4000/switches",{headers:new Headers({Authorization:"Basic "+s.encode(this._authString)})})];case 1:if(403===(e=n.sent()).status)throw new Error("Authentication error with Lightswitch Server");if(e.status>=400)throw new Error("Server Error");return[4,e.json()];case 2:return t=n.sent(),console.log(t),[2,t.lightswitches]}}))},new((r=void 0)||(r=Promise))((function(t,c){function o(e){try{a(i.next(e))}catch(t){c(t)}}function s(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){e.done?t(e.value):new r((function(t){t(e.value)})).then(o,s)}a((i=i.apply(e,n||[])).next())}));var e,n,r,i};var n=e.clientId,r=e.apiKey,i=e.frequencyInSeconds,o=void 0===i?300:i;this._authString=n+":"+r,setInterval(this._setSwitches,1e3*o)},l=function(e){var t;return null===(t=Object(r.useContext)(u).lightswitchClient)||void 0===t?void 0:t.getSwitch(e)},u=Object(r.createContext)({}),h=u.Provider,f=function(e){var t,n=e.lightswitchClient,c=e.children,o=null===(t=n)||void 0===t?void 0:t.getSwitches(),s=Object(r.useState)(o),a=s[0],l=s[1];return n.subscribe((function(e){console.log("subscribe",e),l(e)})),i.a.createElement(h,{value:{lightswitches:a,lightswitchClient:n}},c)}}).call(this,n(11))},,function(e,t,n){e.exports=n(12)},,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(2),o=n.n(c),s=(n(10),n(1)),a=new s.a({clientId:"ck5nk1ei90022qcw1vrqqbp1f",apiKey:"181d0f0e-709d-404c-8724-5d82d6f4252a",frequencyInSeconds:3}),l=function(){var e=Object(s.c)("test1"),t=Object(s.c)("test2");return i.a.createElement("div",null,e&&e.enabled?i.a.createElement("div",null,"Dana's First Test is Enabled"):i.a.createElement("div",null,"Dana's Test is Disabled"),t&&t.enabled?i.a.createElement("div",null,"Dana's Second Test is Now Running"):i.a.createElement("div",null))},u=function(){return i.a.createElement(s.b,{lightswitchClient:a},i.a.createElement(l,null))};o.a.render(i.a.createElement(u,null),document.getElementById("root"))}],[[3,1,2]]]);
//# sourceMappingURL=main.e047832a.chunk.js.map